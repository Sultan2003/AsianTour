<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asiantour</title>
    <style>
      body > .skiptranslate {
        display: none !important;
      }
      body {
        top: 0px !important;
        position: static !important;
      }
      .goog-te-banner-frame.skiptranslate {
        display: none !important;
      }
      .goog-te-banner-frame {
        display: none !important;
      }
      #goog-gt-tt,
      .goog-te-balloon-frame,
      .goog-text-highlight {
        display: none !important;
      }
      /* === Google Translate Toggle Button === */
      #translateButton {
        position: fixed;
        top: 3px;
        left: 5px;
        background: #9bc8a4;
        color: #fff;
        border: none;
        border-radius: 10px;
        padding: 6px 12px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        transition: all 0.3s ease;
        z-index: 1000;
      }

      #translateButton:hover {
        transform: translateY(-2px);
        background: #88b491;
      }

      /* === Google Translate Widget Container === */
      #google_translate_element {
        display: none;
        position: fixed;
        top: 3px; /* right below button */
        left: 5px;
        background: #ffffff;
        padding: 8px 10px;
        border-radius: 10px;
        box-shadow: 0 4px 14px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Optional: refine Google dropdown */
      .goog-te-menu-value span {
        color: #004aad !important;
        font-weight: 500 !important;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <!-- üåê Translate UI -->
    <button id="translateButton">üåê Translate</button>
    <div id="google_translate_element"></div>

    <script type="module" src="/src/main.jsx"></script>

    <!-- Google Translate Loader Script -->
    <script>
      const button = document.getElementById("translateButton");
      const translateDiv = document.getElementById("google_translate_element");
      let scriptLoaded = false;

      button.addEventListener("click", () => {
        if (translateDiv.style.display === "block") {
          translateDiv.style.display = "none";
          return;
        }

        translateDiv.style.display = "block";

        if (!scriptLoaded) {
          const script = document.createElement("script");
          script.src =
            "//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";
          document.body.appendChild(script);
          scriptLoaded = true;
        }
      });

      function googleTranslateElementInit() {
        new google.translate.TranslateElement(
          { pageLanguage: "en" },
          "google_translate_element"
        );

        // üîπ Detect when a language is selected, then hide the box
        const observer = new MutationObserver(() => {
          const selectedLang = document.querySelector(".goog-te-combo");
          if (selectedLang) {
            selectedLang.addEventListener("change", () => {
              translateDiv.style.display = "none";
            });
          }
        });

        observer.observe(document.body, { childList: true, subtree: true });
      }

      window.googleTranslateElementInit = googleTranslateElementInit;
    </script>

    <script>
      function hideGoogleTranslateBar() {
        const frame = document.querySelector(".goog-te-banner-frame");
        if (frame) frame.style.display = "none";
        document.body.style.top = "0px";
      }
      document.addEventListener("DOMContentLoaded", hideGoogleTranslateBar);
      setInterval(hideGoogleTranslateBar, 1000); // keep checking if it reappears
    </script>
  </body>
</html>
